<app-comun-date></app-comun-date>

<div class="container-card">

  <div [@cardAnimation1] class="card-box col-lg-6 col-md-12 col-sm-12 col-12">
    <div class="card m-2">

      <mat-label class="group-label">Реквізити компанії:</mat-label>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>Назва компанії:</mat-label>
        <input name="comunal_company" matInput [disabled]="disabled" [(ngModel)]="flatInfo.comunal_company">
      </mat-form-field>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>Особистий рахунок:</mat-label>
        <input name="personalAccount" matInput [disabled]="disabled" [(ngModel)]="flatInfo.personalAccount">
      </mat-form-field>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>IBAN:</mat-label>
        <input name="iban" matInput [disabled]="disabled" [(ngModel)]="flatInfo.iban" [maxlength]="29"
          pattern="^[A-Za-z0-9]{29}$">
        <mat-error>IBAN повинен містити 29 символів.</mat-error>

      </mat-form-field>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>ЄДРПОУ:</mat-label>
        <input name="edrpo" matInput [disabled]="disabled" [(ngModel)]="flatInfo.edrpo" [maxlength]="8"
          pattern="^[0-9]{8}$">
        <mat-error>ЄДРПОУ повинен містити 8 цифр.</mat-error>
      </mat-form-field>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>Адреса компанії:</mat-label>
        <input name="comunal_address" matInput [disabled]="disabled" [(ngModel)]="flatInfo.comunal_address">
      </mat-form-field>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>Сайт компанії:</mat-label>
        <input name="comunal_site" matInput [disabled]="disabled" [(ngModel)]="flatInfo.comunal_site">
      </mat-form-field>

      <mat-form-field class="item-select m-1" appearance="outline">
        <mat-label>Телефон</mat-label>
        <input type="tel" name="comunal_phone" matInput [disabled]="disabled" [(ngModel)]="flatInfo.comunal_phone"
          [maxlength]="10" pattern="^[0-9]{10}$">
        <mat-error>Телефон повинен містити 10 цифр.</mat-error>
      </mat-form-field>

    </div>
  </div>

  <div [@cardAnimation1] class="card-box col-lg-6 col-md-12 col-sm-12 col-12">
    <div class="card m-2">

      <div class="border-group mb-2">
        <mat-label class="group-label">Підрахунок за площею оселі:</mat-label>

        <div class="item-group mt-2">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label class="disabledNot">Площа оселі м²</mat-label>
            <input class="disabledNot" name="area" matInput [disabled]="disabledNot" [(ngModel)]="area">
          </mat-form-field>

          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label class="disabledNot">Тип оселі</mat-label>
            <mat-select class="disabledNot" name="area" [(ngModel)]="selectedOption" [disabled]="disabledNot">
              <mat-option [value]="1">Будинок</mat-option>
              <mat-option [value]="2">Квартира</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="item-group">
          <mat-form-field class="item-width-50 m-1 disabledNot" appearance="outline">
            <mat-label class="disabledNot">До сплати &#8372;:</mat-label>
            <input class="disabledNot" matInput type="number" [disabled]="disabledNot"
              [(ngModel)]="flatInfo.calc_tariff_square" name="calc_tariff_square">
          </mat-form-field>

          <mat-form-field class="item-width-50 m-1" appearance="outline">
            <mat-label>Тариф &#8372;:</mat-label>
            <input matInput type="number" [disabled]="disabled" [(ngModel)]="tariff_square" name="tariff_square"
              (ngModelChange)="calculatePaySquare()">
          </mat-form-field>
        </div>
      </div>

      <div class="border-group">
        <mat-label class="group-label">Підрахунок по лічильнику: </mat-label>

        <div class="item-group mt-2">
          <mat-form-field class="item-width-50 m-1" appearance="outline">
            <mat-label class="disabledNot">Попередні:</mat-label>
            <input class="disabledNot" matInput type="number" [disabled]="disabled" [(ngModel)]="flatInfo.comunal_before"
              name="comunal_before" (ngModelChange)="calculateConsumed()">
          </mat-form-field>


          <mat-form-field class="item-width-50 m-1" appearance="outline">
            <mat-label>Поточні:</mat-label>
            <input matInput type="number" [disabled]="disabled" [(ngModel)]="flatInfo.comunal_now" name="comunal_now"
              (ngModelChange)="calculateConsumed()">
          </mat-form-field>
        </div>

        <div class="item-group">
          <mat-form-field class="item-width-50 m-1" appearance="outline">
            <mat-label class="disabledNot">Спожито:</mat-label>
            <input class="disabledNot" matInput type="number" [disabled]="disabledNot" [(ngModel)]="flatInfo.consumed"
              name="consumed" (ngModelChange)="calculatePay()">
          </mat-form-field>

          <mat-form-field class="item-width-50 m-1" appearance="outline">
            <mat-label>Тариф &#8372;:</mat-label>
            <input matInput type="number" [disabled]="disabled" [(ngModel)]="flatInfo.tariff" name="tariff"
              (ngModelChange)="calculatePay()">
          </mat-form-field>
        </div>

        <div class="item-group">
          <mat-form-field class="item-width-50 m-1 disabledNot" appearance="outline">
            <mat-label class="disabledNot">До сплати &#8372;:</mat-label>
            <input class="disabledNot" matInput type="number" [disabled]="disabledNot"
              [(ngModel)]="flatInfo.calc_howmuch_pay" name="calc_howmuch_pay">
          </mat-form-field>

          <mat-form-field class="item-width-50 m-1" appearance="outline">
            <mat-label>Сплатив &#8372;:</mat-label>
            <input matInput type="number" [disabled]="disabled" [(ngModel)]="flatInfo.howmuch_pay" name="howmuch_pay">
          </mat-form-field>
        </div>
      </div>



      <div class="form-floating p-1">
        <textarea #textArea class="form-control scrollable-textarea" id="floatingTextarea" [disabled]="disabled"
          [(ngModel)]="flatInfo.about_pay" name="about_pay" (input)="onInput()"></textarea>
        <label for="floatingTextarea">
          <p>Коментар про запис:</p>
        </label>
      </div>

      <div class="btn-group">
        <button class="btn" matTooltip="ЗБЕРЕГТИ" (click)="saveInfo()"><i
            class="icon fa-regular fa-circle-check"></i></button>
        <button class="btn" matTooltip="РЕДАГУВАТИ" (click)="editInfo()"><i class="icon fa-solid fa-pen"></i></button>
        <button class="btn" matTooltip="ОЧИСТИТИ" (click)="clearInfo()"><i class="icon fa-solid fa-eraser"></i></button>
        <button class="btn" matTooltip="Копіювати" (click)="copy()"><i class="fa-regular fa-copy"></i></button>
        <button class="btn" matTooltip="Вставити" (click)="paste()"><i class="fa-solid fa-paste"></i></button>
      </div>

    </div>
  </div>

</div>
