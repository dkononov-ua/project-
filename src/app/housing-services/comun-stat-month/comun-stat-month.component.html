<div class="table-content">
  <div class="sticky-top p-2" *ngIf="open_table">
    <div class="app"><app-select-year></app-select-year>
    </div>
    <div class="app"><app-select-month></app-select-month></div>
    <div class="switch-container jc-fs p-2">
      <div class="switch-btn-group">
        <button class="btn" (click)="openConsumed()" [ngClass]="{ 'active': open_consumed}">
          <i class="fa-solid fa-cookie-bite"></i>
          <div class="t-min bold">Спожито</div>
        </button>
      </div>

      <div class="switch-btn-group">
        <button class="btn" (click)="openTariff()" [ngClass]="{ 'active': open_tariff}">
          <i class="fa-solid fa-superscript"></i>
          <div class="t-min bold">Тариф</div>
        </button>
      </div>

      <div class="switch-btn-group">
        <button class="btn" (click)="openHowmuchPay()" [ngClass]="{ 'active': open_howmuch_pay}">
          <i class="fa-solid fa-cash-register"></i>
          <div class="t-min bold">Нараховано</div>
        </button>
      </div>

      <div class="switch-btn-group">
        <button class="btn" (click)="openPayed()" [ngClass]="{ 'active': open_payed}">
          <i class="fa-solid fa-check-to-slot"></i>
          <div class="t-min bold">Сплачено</div>
        </button>
      </div>

      <div class="switch-btn-group">
        <button class="btn" (click)="openDifference()" [ngClass]="{ 'active': open_difference}">
          <i class="fa-solid fa-plus-minus"></i>
          <div class="t-min bold">Різниця</div>
        </button>
      </div>
    </div>
  </div>
  <!-- <button class="btn" (click)="openTable()">
    <i class="fa-solid fa-chevron-up" *ngIf="open_table"></i>
    <i class="fa-solid fa-chevron-down" *ngIf="!open_table"></i></button> -->
  <section class="table-info">
    <div [@top1] class="table-container p-2" *ngIf="!noInformationMessage">
      <div class="wrapper">
        <table class="table-box">
          <thead class="table-head mb-2">
            <tr class="table-row">

              <th class="wi-30">
                <div class="table-cell name ">№</div>
              </th>

              <th class="wi-100">
                <div class="table-cell name ">Назва</div>
              </th>

              <th class="th-grid" *ngIf="open_consumed" (click)="openConsumed()">
                <div class="table-cell name consumed">Спожито</div>
              </th>

              <th class="th-grid" *ngIf="open_tariff" (click)="openTariff()">
                <div class="table-cell name tariff">Тариф</div>
              </th>

              <th class="th-grid" *ngIf="open_howmuch_pay" (click)="openHowmuchPay()">
                <div class="table-cell name howmuch_pay">Нарах.</div>
              </th>

              <th class="th-grid" *ngIf="open_payed" (click)="openPayed()">
                <div class="table-cell name payed">Сплатив</div>
              </th>
              <th class="th-grid" *ngIf="open_difference" (click)="openDifference()">
                <div class="table-cell name differenceOK">Різниця</div>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr class="table-row" *ngFor="let utility of flatInfo">
              <td class="wi-30" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-1 wi-30">
                  {{ utility.id }}
                </div>
              </td>
              <td class="wi-100" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-1 ">
                  {{ utility.name.length > 10 ? (utility.name | slice:0:10) + '...' :
                  utility.name }}
                </div>
              </td>
              <td class="th-grid" *ngIf="open_consumed" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-2 consumed">
                  {{ utility.consumed | number: '1.1-1' }}
                </div>
              </td>
              <td class="th-grid" *ngIf="open_tariff" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-2 tariff">
                  {{ utility.tariff | number: '1.1-1' }}
                </div>
              </td>
              <td class="th-grid" *ngIf="open_howmuch_pay" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-2 howmuch_pay">
                  {{ utility.needPay | number: '1.1-1' }}
                </div>
              </td>
              <td class="th-grid" *ngIf="open_payed" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-2 payed">
                  {{ utility.paid | number: '1.1-1' }}
                </div>
              </td>
              <td class="th-grid" *ngIf="open_difference" [ngClass]="{ 'selected': selectedComun === utility.name}">
                <div class="table-cell name-2"
                  [ngClass]="{ 'differenceOK': utility.difference > 0, 'difference': utility.difference < 0}">
                  {{ utility.difference | number: '1.1-1' }}
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div [@top1] class="table-container" *ngIf="noInformationMessage">
      <h4 class="p-2 mt-3">Статистики за цей час немає...</h4>
    </div>
  </section>
  <div class="sticky-bottom p-2" *ngIf="!noInformationMessage">
    <div [@left1] class="jc-fe flex-box border-bottom">
      Заг. нарах.
      <i class="fa-solid fa-cash-register p-2"></i>
      <span class="t-lar-xx bold">{{ totalNeedPay?.toFixed(2) }}</span> ₴
    </div>

    <div [@left2] class="jc-fe flex-box border-bottom">
      Заг. сплач.
      <i class="fa-solid fa-check-to-slot p-2"></i>
      <span class="t-lar-xx bold"> {{ totalPaid?.toFixed(2) }}</span> ₴
    </div>

    <div [@left3] class="jc-fe flex-box border-bottom"
      [ngClass]="{ 'accent': overpaymentText === 'Борг', 'green': overpaymentText === 'Переплата'}"
      *ngIf="totalPaid && totalNeedPay">
      <i class="fa-solid fa-cash-register p-2"></i>
      <i class="fa-solid fa-minus p-2"></i>
      <i class="fa-solid fa-check-to-slot p-2"></i>
      <i class="fa-solid fa-equals p-2"></i>
      <span class="t-lar-xx bold">{{ difference }}</span> ₴
    </div>

    <div [@left4] class="jc-fe flex-box border-bottom" *ngIf="totalPaid && totalNeedPay">
      В цьому місяці {{overpaymentText}}
    </div>

  </div>
</div>
