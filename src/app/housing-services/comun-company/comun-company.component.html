<ng-container *ngIf="loading; else content">
  <div *ngIf="loading" class="loader-overlay">
    <div class="loader">
      <img src="../../../../assets/logo/Discussio (7).svg" alt="Logo" class="loader-logo">
    </div>
  </div>
</ng-container>

<ng-template #content>

  <div class="container-card col-12">

    <div class="comunal-info p-2">
      <h3 class="text">Інформація про послугу <span
        class="accent">{{selectedComun}}</span></h3>
    </div>

    <div class="card-box col-lg-6 col-md-12 col-sm-12 col-12">
      <div class="card m-2">

        <div class="img-fluid rounded">
          <img [src]="selectedImageUrl ? selectedImageUrl : defaultImageUrl" alt="...">
        </div>

        <div class="card-body">
          <h2>{{comunalName}}</h2>
          <p class="card-title">Компанія постачальника послуг</p>
          <div class="card-title-group p-2" style="width: 200px;">
            <h3 class="card-title" style="word-break: break-all">{{ comunInfo.comunal_company }}</h3>
          </div>

          <div class="form-floating p-1">
            <textarea #textArea class="form-control scrollable-textarea" id="floatingTextarea" [disabled]="disabled"
              [(ngModel)]="comunInfo.about_comun" name="about_comun" (input)="onInput()"
              placeholder="Enter description here"></textarea>
            <label for="floatingTextarea">
              <p>Опис послуги:</p>
            </label>
          </div>


          <p></p>
        </div>

      </div>
    </div>

    <div [@cardAnimation1] class="card-box col-lg-6 col-md-12 col-sm-12 col-12">
      <div class="card m-2 p-2">

        <mat-label class="group-label">Реквізити компанії:</mat-label>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Назва компанії:</mat-label>
          <input name="comunal_company" matInput [disabled]="disabled" [(ngModel)]="comunInfo.comunal_company">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Особистий рахунок:</mat-label>
          <input name="personalAccount" matInput [disabled]="disabled" [(ngModel)]="comunInfo.personalAccount">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>IBAN:</mat-label>
          <input name="iban" matInput [disabled]="disabled" [(ngModel)]="comunInfo.iban" [maxlength]="29"
            pattern="^[A-Za-z0-9]{29}$">
          <mat-error>IBAN повинен містити 29 символів.</mat-error>

        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>ЄДРПОУ:</mat-label>
          <input name="edrpo" matInput [disabled]="disabled" [(ngModel)]="comunInfo.edrpo" [maxlength]="8"
            pattern="^[0-9]{8}$">
          <mat-error>ЄДРПОУ повинен містити 8 цифр.</mat-error>
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Адреса компанії:</mat-label>
          <input name="comunal_address" matInput [disabled]="disabled" [(ngModel)]="comunInfo.comunal_address">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Сайт компанії:</mat-label>
          <input name="comunal_site" matInput [disabled]="disabled" [(ngModel)]="comunInfo.comunal_site">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Телефон</mat-label>
          <input type="tel" name="comunal_phone" matInput [disabled]="disabled" [(ngModel)]="comunInfo.comunal_phone"
            [maxlength]="10" pattern="^[0-9]{10}$">
          <mat-error>Телефон повинен містити 10 цифр.</mat-error>
        </mat-form-field>

        <div class="btn-group">
          <button class="btn" matTooltip="ЗБЕРЕГТИ" (click)="saveInfo()"><i
              class="icon fa-regular fa-circle-check"></i></button>
          <button class="btn" matTooltip="РЕДАГУВАТИ" (click)="editInfo()"><i class="icon fa-solid fa-pen"></i></button>
          <button class="btn" matTooltip="ОЧИСТИТИ" (click)="clearInfo()"><i
              class="icon fa-solid fa-eraser"></i></button>
        </div>

      </div>
    </div>
  </div>
</ng-template>
