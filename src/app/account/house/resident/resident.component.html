<ng-container *ngIf="loading; else content">
  <app-loader></app-loader>
</ng-container>

<ng-template #content>

  <div class="info-container" *ngIf="helpMenu">
    <div class="info-help-box">

      <div class="info-help-text" *ngIf="helpInfo == 1">
        <span class="accent bold">Комунальні</span>
        - повний доступ до меню комунальні послуги,
        створення/видалення послуг, додавання/видалення показників.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 2">
        <span class="accent bold">Наповнення оселі</span> - додавання/видаляти, коригування
        наповнення оселі (меблі, обладнання)
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 3">
        <span class="accent bold">Управління підписниками</span> - дозвіл видаляти або
        підтверджувати до Discusiї підписників.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 4">
        <span class="accent bold">Управління Discussiєю</span>
        - дозвіл до меню Discusiї, можливість
        видаляти підписників з меню Discusiї,
        спілкуватись з підписниками від імені оселі.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 5">
        <span class="accent bold">Управління угодами</span> - дозвіл на укладання та перегляд угод
        від імені оселі.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 6">
        <span class="accent bold">Мешканці оселі</span> - дозвіл на перегляд та спілкування з
        вже доданими мешканцями оселі.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 7">
        <span class="accent bold">Додавання показників</span> - можна вносити дані по комунальним
        послугам без можливості їх створення або видалення.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 8">
        <span class="accent bold">Редагування оселі</span> - дозволити редагувати інформацію по
        оселю.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 9">
        <span class="accent bold">Замовлення послуг</span> - замовляти послуги з меню послуг.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 10">
        <span class="accent bold">Чат оселі</span> - дозвіл на перегляд та користування чатом від
        імені оселі.
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 11">
        <span class="accent bold">Додавати користувачів</span> - дозволити додавання нових
        користувачів до оселі
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 12">
        <span class="accent bold">Представник оселі</span> - тільки одна особа може бути
        представником, вона буде відображатись від імені оселі при
        веденні Discusiї з підписниками та укладанні угоди.
        (якщо треба змінити представника то потрібно видалити з оселі попереднього представника).
      </div>

      <div class="info-help-text" *ngIf="helpInfo == 13">
        <span class="accent bold">Адміністрування</span> - якщо надати доступ до "Дозволити
        додавати людей" та "Адміністрування" то мешканець отримає можливість надавати дозволи.
      </div>

      <button class="btn" (click)="openHelpMenu(0)">Зрозуміло</button>
    </div>
  </div>

  <div class="flex-column pl-2">
    <div class="t-lar-xx bold dark t-s">
      <div [@left] *ngIf="indexPage === 0">Меню мешканці оселі</div>
      <div [@left] *ngIf="indexPage === 1 && indexCard === 0">Картка власника</div>
      <div [@left] *ngIf="indexPage === 1 && indexCard === 1">Оцінити власника</div>
      <div [@left] *ngIf="indexPage === 1 && indexCard === 2">Відгуки про власника</div>
      <div [@left] *ngIf="indexPage === 2 && indexCard === 0">Всі мешканці</div>
      <div [@left] *ngIf="indexPage === 2 && indexCard === 1">Профіль мешканця</div>
      <div [@left] *ngIf="indexPage === 2 && indexCard === 2">Оцінити мешканця</div>
      <div [@left] *ngIf="indexPage === 2 && indexCard === 3">Дозволи мешканця</div>
      <div [@left] *ngIf="indexPage === 2 && indexCard === 4">Відгуки про мешканця</div>
      <div [@left] *ngIf="indexPage === 3">Додати мешканця</div>
    </div>
  </div>

  <div class="switch-box" *ngIf="indexPage === 0 || indexPage === 3">

    <div class="switch-btn-group">
      <button class="btn" [ngClass]="{'active': indexPage === 0}" (click)="indexPage = 0">
        <i class="fa-solid fa-circle-info"></i>
        <div class="t-min dark bold">Інфо</div>
      </button>
    </div>

    <div class="switch-btn-group" *ngIf="ownerPage">
      <button class="btn" (click)="indexPage = 1">
        <i class="fa-solid fa-id-card-clip"></i>
        <div class="t-min dark bold">Власник.</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" (click)="indexPage = 2">
        <i class="fa-solid fa-users"></i>
        <div class="t-min dark bold">Мешканці</div>
      </button>
    </div>

    <div class="switch-btn-group" *ngIf="!ownerPage">
      <button class="btn" [ngClass]="{'active': indexPage === 3}" (click)="indexPage = 3">
        <i class="fa-solid fa-user-plus"></i>
        <div class="t-min dark bold">Додати</div>
      </button>
    </div>

  </div>

  <div class="switch-box" *ngIf="indexPage === 1">

    <div class="switch-btn-group">
      <button class="btn" (click)="indexPage = 0">
        <i class="fa-solid fa-arrow-left"></i>
        <div class="t-min dark bold">Назад</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" (click)="indexCard = 0" [ngClass]="{ 'active': indexCard === 0 }">
        <i class="fa-regular fa-user"></i>
        <div class="t-min dark bold">Профіль</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" (click)="indexCard = 1" [ngClass]="{ 'active': indexCard === 1 }">
        <i class="fa-solid fa-ranking-star"></i>
        <div class="t-min dark bold">Оцінити</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" (click)="indexCard = 2" [ngClass]="{ 'active': indexCard === 2 }">
        <div class="flex-box btn-rating">
          <i class="fa-solid fa-star"></i>
        </div>
        <div class="t-min dark bold">Відгуки</div>
      </button>
    </div>
  </div>

  <div class="switch-box" *ngIf="indexPage === 2">

    <div class="switch-btn-group">
      <button class="btn" (click)="indexPage = 0">
        <i class="fa-solid fa-arrow-left"></i>
        <div class="t-min dark bold">Назад</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" [ngClass]="{'active': indexCard === 0}" (click)="indexCard = 0">
        <i class="fa-solid fa-users"></i>
        <div class="t-min dark bold">Мешканці</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" (click)="indexCard = 1" [ngClass]="{ 'active': indexCard === 1 }">
        <i class="fa-regular fa-user"></i>
        <div class="t-min dark bold">Профіль</div>
      </button>
    </div>

    <div class="switch-btn-group" *ngIf="!ownerPage">
      <button [disabled]="selectMyPage" class="btn" (click)="indexCard = 2" [ngClass]="{ 'active': indexCard === 2 }">
        <i class="fa-solid fa-ranking-star"></i>
        <div class="t-min dark bold">Оцінити</div>
      </button>
    </div>

    <div class="switch-btn-group">
      <button class="btn" (click)="indexCard = 3" [ngClass]="{ 'active': indexCard === 3 }">
        <i class="fa-solid fa-user-gear"></i>
        <div class="t-min dark bold">Дозволи</div>
      </button>
    </div>

  </div>

  <div class="card-box">

    <div [@left2] class="card-box p-2" *ngIf="indexPage === 0">
      <div class="card-menu">
        <div class="param-box p-2">

          <div class="param-name">
            <div class="t-med t-c">В цьому меню знаходяться мешканці оселі яким можна надавати різні доступи,
              з'являється можливіть оцінювати та залишати відгуки на орендарів та власника. Доступ до швидкого
              копіювання
              контактних даних, створення чату або перестворення угоди.</div>
            <div class="t-min t-c gray"></div>
          </div>

          <div class="flex-group border1 ">
            <button class="link-t flex-box-row" [routerLinkActive]="'active'" [routerLink]="'/house/agree-menu'"
              [disabled]="ownerPage">
              <i class="fa-solid fa-arrow-right"></i><span class="ml-2">Додати мешканців з меню угод</span>
            </button>
            <div class="t-min t-c">Мешканців можна додати після підтвердження ними угоди оренди та створення акту
              передачі</div>
          </div>

          <div class="flex-group border1 mt-2">
            <button class="link-t flex-box-row" (click)="indexPage = 3" [disabled]="ownerPage">
              <i class="fa-solid fa-arrow-right"></i><span class="ml-2">Додати мешканців без угод</span>
            </button>
            <div class="t-min t-c">Мешканців можна додати напряму по їх ID, в такому випадку оцінювати одне одного
              ви не зможете</div>
          </div>

        </div>

        <div class="img-wrapper">
          <img class="img" src="../../../../assets/example-agree/people_yard3.jpg" alt="">
        </div>

      </div>
    </div>

    <!-- картка власник -->
    <div [@left2] class="card-box" *ngIf="indexPage === 1 && ownerPage && ownerInfo">

      <div class="copyMessage-box" *ngIf="isCopiedMessage">
        <div class="copyMessage-text">{{isCopiedMessage}}</div>
        <i class="fa-regular fa-copy"></i>
        <div class="t-lar dark bold">Discussio</div>
      </div>

      <!-- власник інформація -->
      <div [@swichCard] class="card-animation p-2" *ngIf="indexCard === 0">
        <div class="card">
          <div class="img-fluid">
            <div class="img-wrapper">
              <img [src]="serverPathPhotoUser + (ownerInfo?.img ? ownerInfo?.img : 'user_default.svg')"
                alt="User Image">
            </div>
            <div class="panel-container">
              <div class="wrapper">

                <button class="btn-panel" (click)="indexCard = 3">
                  <div class="flex-box btn-rating">
                    <i class="fa-solid fa-star"></i>
                    <div class="t-lar bold accent abs" *ngIf="ratingOwner">{{ratingOwner}}</div>
                    <div class="t-min bold accent abs-1" *ngIf="ratingOwner">({{numberOfReviewsOwner}})</div>
                  </div>
                  <div class="t-min dark">Рейтинг</div>
                </button>

                <button class="btn-panel" (click)="createChat(ownerInfo)"><i class="fa-solid fa-message"></i>
                  <div class="t-min">Повід.</div>
                  <div class="t-min" *ngIf="statusMessageChat === true">Чат створено!</div>
                </button>

                <button class="btn-panel" (click)="reportUser(ownerInfo)"><i class="fa-solid fa-masks-theater"></i>
                  <div class="t-min">Скарга</div>
                </button>

                <button *ngIf="ownerInfo.tell" class="btn-panel" (click)="copyTell(ownerInfo.tell)"><i
                    class="fa-solid fa-phone"></i>
                  <div class="t-min">Телефон</div>
                </button>

                <button class="btn-panel" (click)="copyId(ownerInfo.user_id)"><i class="fa-solid fa-fingerprint"></i>
                  <div class="t-min">ID</div>
                </button>

                <button class="btn-panel" (click)="copyMail(ownerInfo.mail)" *ngIf="ownerInfo.mail"><i
                    class="fa-solid fa-at"></i>
                  <div class="t-min">Пошта</div>
                </button>

              </div>
            </div>
          </div>

          <div class="flex-box p-2">
            <div class="t-lar-xx t-c bold p-1">{{ ownerInfo.lastName }} </div>
            <div class="t-lar-xx t-c bold p-1">{{ ownerInfo.firstName }}</div>
            <div class="t-lar-x t-c p-1">{{ ownerInfo.surName }}</div>
          </div>

          <div class="social-link-container">
            <div class="social-link-box" *ngIf="!ownerInfo.instagram && !ownerInfo.facebook && !ownerInfo.telegram">
              <p class="text">Посилання відсутні.</p>
              <p class="text">Додайте їх в налаштуваннях, так власники оселі зможуть дізнатись про вас більше
                інформаці</p>
            </div>

            <div class="social-link-box" *ngIf="ownerInfo.instagram">
              <a class="social-link-icon" target="_blank"
                href="https://www.instagram.com/{{   ownerInfo.instagram }}"><i
                  class="fab fa-brands fa-instagram"></i></a>
              <div class="social-link-name">instagram</div>
            </div>

            <div class="social-link-box" *ngIf="ownerInfo.facebook">
              <a class="social-link-icon" target="_blank" href="https://www.facebook.com/{{ ownerInfo.facebook }}"><i
                  class="fab fa-brands fa-facebook"></i></a>
              <div class="social-link-name">facebook</div>
            </div>

            <div class="social-link-box" *ngIf="ownerInfo.telegram">
              <a class="social-link-icon" target="_blank" href="https://t.me/{{ ownerInfo.telegram }}"><i
                  class="fab fa-brands fa-telegram"></i></a>
              <div class="social-link-name">telegram</div>
            </div>

            <div class="social-link-box" *ngIf="ownerInfo.viber">
              <a class="social-link-icon" (click)="copyViber(ownerInfo.viber)"><i
                  class="fab fa-brands fa-viber"></i></a>
              <div class="social-link-name">viber</div>
            </div>

          </div>
        </div>
      </div>

      <!-- власник рейтинг -->
      <div [@swichCard] class="card-animation p-2" *ngIf="indexCard === 1">
        <div class="status-container ">
          <div class="status-box">
            <div class="status-value">Допомога</div>
          </div>
          <div class="status-hover">
            <div class="status-hover-label">Забезпечення Зручності та Довіри</div>
            <div class="status-hover-text">Система <span class="accent bold">"Рейтинг
                орендодавця"</span>дозволяє орендарам оцінювати орендодавців раз на місяць. Вони можуть
              редагувати свої оцінки протягом 45 днів після їх поставлення. Ця система допомагає створити довіру з
              самого початку до власника або застерегти орендарів від можливих проблем.
              <span class="accent bold">Оцінити орендодавця може лише орендар з яким був сформований акт-прийому
                передачі оселі.</span>
            </div>
          </div>
        </div>

        <div class="t-lar t-e bold p-1 accent">Оцінити власника</div>

        <div class="flex-box p-2">
          <div class="t-lar-xx t-c bold p-1">{{ ownerInfo.lastName }} </div>
          <div class="t-lar-xx t-c bold p-1">{{ ownerInfo.firstName }}</div>
          <div class="t-lar-x t-c p-1">{{ ownerInfo.surName }}</div>
        </div>

        <div class="group-rating p-2">
          <mat-form-field class="w-100">
            <mat-label>Дата відгуку</mat-label>
            <input matInput [matDatepicker]="picker" [(ngModel)]="rating.ratingDate" [min]="minDate" [max]="maxDate"
              name="ratingDate">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-label class="t-med bold">Ваша оцінка орендодавцю</mat-label>
          <mat-radio-group class="radio-group w-100 p-2" aria-label="Select an option" [(ngModel)]="rating.ratingValue">

            <div class="radio-btn">
              <mat-radio-button color="warn" value="-10">
                <i class="fa-regular fa-face-angry abs" [ngClass]="{ 'active': rating.ratingValue === '1' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="-5">
                <i class="fa-regular fa-face-frown abs" [ngClass]="{ 'active': rating.ratingValue === '2' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="3">
                <i class="fa-regular fa-face-meh abs" [ngClass]="{ 'active': rating.ratingValue === '3' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="5">
                <i class="fa-regular fa-face-grin abs" [ngClass]="{ 'active': rating.ratingValue === '4' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="10">
                <i class="fa-regular fa-face-smile-beam abs" [ngClass]="{ 'active': rating.ratingValue === '5' }"></i>
              </mat-radio-button>
            </div>

          </mat-radio-group>

          <mat-form-field class="form-field w-100">
            <mat-label>Відгук</mat-label>
            <textarea [(ngModel)]="rating.ratingComment" name="menuComment" matInput
              placeholder="Опишіть що вплинуло на вашу оцінку."></textarea>
          </mat-form-field>
        </div>
        <div class="btn-group p-1 w-100">
          <button class="btn w-100" (click)="sendRatingOwner(selectedSubscriber)">
            <i class="fa-solid fa-check-double"></i>Відправити
          </button>
        </div>
      </div>

      <!-- власник відгуки -->
      <div [@swichCard] class="card-animation p-2" *ngIf="indexCard === 2">
        <div class="t-lar-x bold accent">Відгуки орендарів</div>

        <div *ngIf="reviewsOwner">
          <div class="card-reviews p-2 m-2" *ngFor="let review of reviewsOwner">
            <div class="flex-box">

              <div class="img-review-wrapper">
                <img class="img-review-fluid"
                  [src]="review.reporter.img && review.reporter.img ? serverPathPhotoUser + review.reporter.img : serverPathPhotoFlat + 'user_default.svg'"
                  alt="img">
              </div>

              <div class="flex-box">
                <div class="t-min">{{review.reporter.firstName}} {{review.reporter.lastName}}
                  {{review.reporter.surName}}</div>
              </div>

              <div class="flex-box">
                <div class="t-min">ID відправника:{{review.info.appraiser}}</div>
              </div>
            </div>
            <div class="flex-column">
              <div class="t-min">Дата відгуку: <span class="accent"> {{review.info.data |date}}</span> Оцінка: <span
                  class="accent"> {{review.info.mark}}</span></div>
              <div class="t-min">{{review.info.about}}</div>
            </div>
          </div>
        </div>

        <div *ngIf="!reviewsOwner">
          <div class="t-lar">Відгуків ще немає...</div>
        </div>
      </div>

    </div>

    <!-- картка орендар -->
    <div [@left2] class="card-box" *ngIf="indexPage === 2 && selectedSubscriber">

      <div class="copyMessage-box" *ngIf="isCopiedMessage">
        <div class="copyMessage-text">{{isCopiedMessage}}</div>
        <i class="fa-regular fa-copy"></i>
        <div class="t-lar dark bold">Discussio</div>
      </div>

      <!-- Всі мешканці -->
      <div [@swichCard] class="card-animation" *ngIf="indexCard === 0">
        <app-house-residents (click)="indexCard = 0"></app-house-residents>
      </div>

      <!-- орендар інформація -->
      <div [@swichCard] class="card-animation p-2" *ngIf="indexCard === 1">
        <div class="card">
          <!-- орендар фото -->
          <div class="img-fluid">
            <div class="img-wrapper">
              <img
                [src]="serverPathPhotoUser + (selectedSubscriber.photo ? selectedSubscriber.photo : 'user_default.svg')"
                alt="User Image">
            </div>
            <div class="panel-container">
              <div class="wrapper">

                <button class="btn-panel" (click)="indexCard = 4">
                  <div class="flex-box btn-rating">
                    <i class="fa-solid fa-star"></i>
                    <div class="t-lar bold accent abs" *ngIf="ratingTenant">{{ratingTenant}}</div>
                    <div class="t-min bold accent abs-1" *ngIf="ratingTenant">({{numberOfReviews}})</div>
                  </div>
                  <div class="t-min dark">Рейтинг</div>
                </button>

                <button class="btn-panel" (click)="createChat(selectedSubscriber)"><i class="fa-solid fa-message"></i>
                  <div class="t-min">Повід.</div>
                  <div class="t-min" *ngIf="statusMessageChat === true">Чат створено!</div>
                </button>

                <button *ngIf="!ownerPage" class="btn-panel"
                  [routerLink]="['/agree-create', selectedSubscriber.user_id]">
                  <i class="fa-solid fa-file-contract"></i>
                  <div class="t-min">Угода</div>
                </button>

                <button *ngIf="!ownerPage" class="btn-panel" (click)="reportUser(selectedSubscriber)"><i
                    class="fa-solid fa-masks-theater"></i>
                  <div class="t-min">Скарга</div>
                </button>

                <button class="btn-panel" (click)="copyTell(selectedSubscriber.tell)" *ngIf="selectedSubscriber.tell"><i
                    class="fa-solid fa-phone"></i>
                  <div class="t-min">Телефон</div>
                </button>

                <button class="btn-panel" (click)="copyId(selectedSubscriber.user_id)"><i
                    class="fa-solid fa-fingerprint"></i>
                  <div class="t-min">ID</div>
                </button>

                <button class="btn-panel" (click)="copyMail(selectedSubscriber.mail)" *ngIf="selectedSubscriber.mail"><i
                    class="fa-solid fa-at"></i>
                  <div class="t-min">Пошта</div>
                </button>

                <button *ngIf="!ownerPage" class="btn-panel" (click)="removeUser(selectedSubscriber)">
                  <i class="fa-solid fa-user-xmark"></i>
                  <div class="t-min">Видалити</div>
                </button>

              </div>
            </div>
          </div>

          <div class="flex-box p-2">
            <div class="t-lar-xx t-c bold p-1">{{ selectedSubscriber.lastName }} </div>
            <div class="t-lar-xx t-c bold p-1">{{ selectedSubscriber.firstName }}</div>
            <div class="t-lar-x t-c p-1">{{ selectedSubscriber.surName }}</div>
          </div>

          <div class="social-link-container">
            <div class="social-link-box"
              *ngIf="!selectedSubscriber.instagram && !selectedSubscriber.facebook && !selectedSubscriber.telegram">
              <p class="text">Посилання відсутні.</p>
              <p class="text">Додайте їх в налаштуваннях, так власники оселі зможуть дізнатись про вас більше
                інформаці</p>
            </div>

            <div class="social-link-box" *ngIf="selectedSubscriber.instagram">
              <a class="social-link-icon" target="_blank"
                href="https://www.instagram.com/{{  selectedSubscriber.instagram }}"><i
                  class="fab fa-brands fa-instagram"></i></a>
              <div class="social-link-name">instagram</div>
            </div>

            <div class="social-link-box" *ngIf="selectedSubscriber.facebook">
              <a class="social-link-icon" target="_blank"
                href="https://www.facebook.com/{{ selectedSubscriber.facebook }}"><i
                  class="fab fa-brands fa-facebook"></i></a>
              <div class="social-link-name">facebook</div>
            </div>

            <div class="social-link-box" *ngIf="selectedSubscriber.telegram">
              <a class="social-link-icon" target="_blank" href="https://t.me/{{ selectedSubscriber.telegram }}"><i
                  class="fab fa-brands fa-telegram"></i></a>
              <div class="social-link-name">telegram</div>
            </div>

            <div class="social-link-box" *ngIf="selectedSubscriber.viber">
              <a class="social-link-icon" (click)="copyViber(selectedSubscriber.viber)"><i
                  class="fab fa-brands fa-viber"></i></a>
              <div class="social-link-name">viber</div>
            </div>

          </div>
        </div>
      </div>

      <!-- орендар оцінити -->
      <div [@swichCard] class="card-animation p-2" *ngIf="indexCard === 2">

        <div class="status-container ">
          <div class="status-box">
            <div class="status-value">Допомога</div>
          </div>
          <div class="status-hover">
            <div class="status-hover-label">Забезпечення Зручності та Довіри</div>
            <div class="status-hover-text">Система <span class="accent bold">"Рейтинг
                орендара"</span>дозволяє власникам нерухомості оцінювати орендарів раз на місяць. Вони можуть
              редагувати свої оцінки протягом 45 днів після їх поставлення. Ця система допомагає створити довіру
              з самого початку до орендара або застерегти власників від можливих проблем.
              <span class="accent bold">Оцінити можна лише того орендара з яким у вас є акт-прийому передачі
                оселі.</span>
            </div>
          </div>
        </div>

        <div class="flex-box p-2 mt-2">
          <div class="t-lar-xx t-c bold p-1">{{ selectedSubscriber.lastName }} </div>
          <div class="t-lar-xx t-c bold p-1">{{ selectedSubscriber.firstName }}</div>
          <div class="t-lar-x t-c p-1">{{ selectedSubscriber.surName }}</div>
        </div>

        <div class="group-rating p-2">
          <mat-form-field class="w-100">
            <mat-label>Дата відгуку</mat-label>
            <input matInput [matDatepicker]="picker" [(ngModel)]="rating.ratingDate" [min]="minDate" [max]="maxDate"
              name="ratingDate">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-label class="t-med bold">Ваша оцінка орендару</mat-label>
          <mat-radio-group class="radio-group w-100 p-2" aria-label="Select an option" [(ngModel)]="rating.ratingValue">

            <div class="radio-btn">
              <mat-radio-button color="warn" value="-10">
                <i class="fa-regular fa-face-angry abs" [ngClass]="{ 'active': rating.ratingValue === '-10' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="-5">
                <i class="fa-regular fa-face-frown abs" [ngClass]="{ 'active': rating.ratingValue === '-5' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="3">
                <i class="fa-regular fa-face-meh abs" [ngClass]="{ 'active': rating.ratingValue === '3' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="5">
                <i class="fa-regular fa-face-grin abs" [ngClass]="{ 'active': rating.ratingValue === '5' }"></i>
              </mat-radio-button>
            </div>

            <div class="radio-btn">
              <mat-radio-button color="warn" value="10">
                <i class="fa-regular fa-face-smile-beam abs" [ngClass]="{ 'active': rating.ratingValue === '10' }"></i>
              </mat-radio-button>
            </div>

          </mat-radio-group>

          <mat-form-field class="form-field w-100">
            <mat-label>Відгук</mat-label>
            <textarea [(ngModel)]="rating.ratingComment" name="menuComment" matInput
              placeholder="Опишіть що вплинуло на вашу оцінку."></textarea>
          </mat-form-field>
        </div>
        <div class="btn-group p-1 w-100">
          <button class="btn w-100" (click)="sendRating(selectedSubscriber)">
            <i class="fa-solid fa-check-double"></i>Відправити
          </button>
        </div>
      </div>

      <!-- орендар доступ -->
      <div [@swichCard] class="card-animation p-2 checkbox-container" *ngIf="indexCard === 3">

        <div class="status-container ">
          <div class="status-box">
            <div class="status-value">Допомога</div>
          </div>
          <div class="status-hover">
            <div class="status-hover-label">Дозволи оселі</div>
            <div class="status-hover-text">
              Орендар не може сам надавати собі дозволи тільки власник або андміністратор може надавати всі необхідні
              дозволи, детально про кожен описано поряд з дозволом.
            </div>
          </div>
        </div>

        <div class="flex-box p-2 mt-2">
          <div class="t-lar-xx t-c bold p-1">{{ selectedSubscriber.lastName }} </div>
          <div class="t-lar-xx t-c bold p-1">{{ selectedSubscriber.firstName }}</div>
          <div class="t-lar-x t-c p-1">{{ selectedSubscriber.surName }}</div>
        </div>

        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_comunal">
            <span class="checkbox-name">Комунальні</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(1)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_filling">
            <span class="checkbox-name">Наповнення оселі</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(2)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_subs">
            <span class="checkbox-name">Управління підписниками</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(3)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_discuss">
            <span class="checkbox-name">Управління Discussiєю</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(4)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_agreement">
            <span class="checkbox-name">Управління угодами</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(5)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_citizen">
            <span class="checkbox-name">Мешканці оселі</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(6)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_comunal_indexes">
            <span class="checkbox-name">Додавання показників</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(7)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_flat_features">
            <span class="checkbox-name">Редагування оселі</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(8)"><i class="fa-solid fa-question"></i></button>
        </div>

        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_flat_chats">
            <span class="checkbox-name">Чат оселі</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(10)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_added">
            <span class="checkbox-name">Додавати користувачів</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(11)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_agent">
            <span class="checkbox-name">Представник оселі</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(12)"><i class="fa-solid fa-question"></i></button>
        </div>
        <div class="checkbox-group">
          <mat-checkbox color="warn" [(ngModel)]="selectedSubscriber.acces_admin">
            <span class="checkbox-name">Адміністрування</span></mat-checkbox>
          <button class="checkbox-btn w-30" (click)="openHelpMenu(13)"><i class="fa-solid fa-question"></i></button>
        </div>

        <div class="btn-group p-1 w-100">
          <button [disabled]="ownerPage" class="btn w-100" (click)="addAccess(selectedSubscriber)">
            <i class="fa-solid fa-check-double"></i>Підтвердити
          </button>
        </div>


      </div>

      <!-- орендар відгуки -->
      <div [@swichCard] class="card-animation p-2" *ngIf="indexCard === 4">
        <div class="t-lar-x bold accent">Відгуки власників</div>

        <div *ngIf="reviews">
          <div class="card-reviews p-2 m-2" *ngFor="let review of reviews">
            <div class="flex-box">

              <div class="img-review-wrapper">
                <img class="img-review-fluid"
                  [src]="review.reporter.img && review.reporter.img ? serverPathPhotoUser + review.reporter.img : serverPathPhotoFlat + 'user_default.svg'"
                  alt="img">
              </div>

              <div class="flex-box">
                <div class="t-min">{{review.reporter.firstName}} {{review.reporter.lastName}}
                  {{review.reporter.surName}}</div>
              </div>

              <div class="flex-box">
                <div class="t-min">ID відправника:{{review.info.appraiser}}</div>
              </div>
            </div>
            <div class="flex-column">
              <div class="t-min">Дата відгуку: <span class="accent"> {{review.info.data |date}}</span> Оцінка: <span
                  class="accent"> {{review.info.mark}}</span></div>
              <div class="t-min">{{review.info.about}}</div>
            </div>
          </div>
        </div>

        <div *ngIf="!reviews">
          <div class="t-lar">Відгуків ще немає...</div>
        </div>
      </div>

    </div>

    <!-- додавання мешканців -->
    <div [@left2] class="card-box p-2" *ngIf="indexPage === 3">
      <div class="t-lar bold mb-2">Через цю форму можна додавати мешканців без створення угод.</div>
      <app-user-search class="w-100"></app-user-search>
      <div class="t-min dark">Важливо що перед додаванням у майбутнього мешканця має бути ввімкнено в налаштуваннях
        його
        аккаунту "Дозвіл на додавання в оселю" це дає можливість обійти створення угоди.
        Це може бути корисним якщо ви захочете додати і членів вашої сім'ї до оселі щоб вони могли також керувати або
        переглядати інформацію про оселю.</div>
      <div class="item-group w-100 flex-column p-2">
        <button class="link-toMenu not-allowed flex-box-row" [routerLink]="'/information-user'">
          <i class="fa-solid fa-arrow-right"></i><span class="ml-2 bold">Увімкнути дозвіл тут.</span>
        </button>
      </div>
    </div>


  </div>

</ng-template>

<div *ngIf="statusMessage" class="status-message">
  <div class="status-message-text">{{ statusMessage }}</div>
  <img class="status-message-logo" src="{{path_logo}}" alt="logo">
  <div class="status-message-name">Discussio</div>
</div>
