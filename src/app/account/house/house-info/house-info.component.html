<ng-container *ngIf="loading; else content">
  <app-loader></app-loader>
</ng-container>

<ng-template #content>
  <app-menu class="w-100"></app-menu>
  <div class="container-box">
    <app-selection-housing class="hide-pc w-100 mb-2"></app-selection-housing>

    <div class="card-box col-lg-6 col-md-6 col-sm-12 col-12">
      <div class="card mb-3">

        <div class="t-lar bold t-c hide-pc">Профіль оселі</div>

        <div class="status-container">
          <div class="status-box">
            <div class="status-value" *ngIf="HouseInfo.rent === 1">Активне</div>
            <!-- <div class="status-value" *ngIf="HouseInfo.rent === 0">Не опублікована</div> -->
            <div class="status-value" *ngIf="HouseInfo.private === 1">Приватно</div>
          </div>
          <div class="status-hover">
            <div class="status-hover-label">Допомога</div>
            <div class="status-hover-text">
              <ul *ngIf="HouseInfo.rent === 1">
                Статус оселі:
                <li *ngIf="HouseInfo.rent === 1" class="status-hover-li">
                  <div class="status-value">Активне</div> - оголошення опубліковане.
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="img-container">
          <div class="img-wrapper">
            <img class="img-fluid"
              [src]="HouseInfo.photos && HouseInfo.photos[currentPhotoIndex].img ? serverPathPhotoFlat + HouseInfo.photos[currentPhotoIndex].img : serverPathPhotoFlat + 'housing_default.svg'"
              alt="Flat Image" alt="Flat Image">
          </div>
          <div *ngIf="HouseInfo.photos.length > 1">
            <button *ngIf="currentPhotoIndex !== 0" class="prev-img" (click)="prevPhoto()"><i
                class="fa-solid fa-chevron-left"></i></button>
            <button *ngIf="currentPhotoIndex !== HouseInfo.photos.length - 1" class="next-img" (click)="nextPhoto()"><i
                class="fa-solid fa-chevron-right"></i></button>
          </div>
          <div class="price">

            <div *ngIf="HouseInfo.option_pay === 0" class="ml-2 price_m">{{
              HouseInfo.price_m
              || '?' }}
              <span class="title-selected">ціна ₴/міс</span>
            </div>

            <div *ngIf="HouseInfo.option_pay === 1" class="ml-2 price_m">{{
              HouseInfo.price_d
              || '?' }}
              <span class="title-selected">ціна ₴/добу</span>
            </div>
          </div>
        </div>

        <div class="btn-box">

          <div class="btn-group">
            <button class="btn" [ngClass]="{'active': indexCard === 2}" (click)="indexCard = 2"><i
                class="fa-solid fa-info"></i></button>
            <div class="btn-name">Інформація</div>
          </div>

          <div class="btn-group">
            <button class="btn" [ngClass]="{'active': indexCard === 1}" (click)="indexCard = 1"><i
                class="fa-solid fa-align-left"></i></button>
            <div class="btn-name">Параметри</div>
          </div>

          <div class="btn-group" [ngClass]="{ 'copied': isCopied }" (click)="copyFlatId()">
            <button class="btn">
              <span class="item" *ngIf="!isCopied">{{ HouseInfo.flat_id }}</span>
              <span class="item" *ngIf="isCopied"><i class="fa-solid fa-copy"></i></span>
            </button>
            <div class="btn-name" *ngIf="!isCopied">ID оселі</div>
            <div class="btn-name" *ngIf="isCopied">Скопійовано</div>
          </div>
        </div>


        <div class="card-text p-1">

          <div class="title-group">
            <div class="title-selected">Область : </div>
            <div class="title-selected-accent">{{ HouseInfo.region }}</div>
          </div>

          <div class="title-group">
            <div class="title-selected">Місто : </div>
            <div class="title-selected-accent">{{ HouseInfo.city }}</div>
          </div>

          <div class="title-group">
            <div class="title-selected">Вулиця : </div>
            <div class="title-selected-accent">{{ HouseInfo.street }}</div>
          </div>

          <div class="title-group">
            <div class="title-selected">Будинок : </div>
            <div class="title-selected-accent">{{ HouseInfo.houseNumber }}</div>
          </div>

          <div class="title-group">
            <div class="title-selected">Квартира : </div>
            <div class="title-selected-accent">{{ HouseInfo.apartment }}</div>
          </div>
        </div>



      </div>
    </div>

    <div class="card-box col-lg-6 col-md-6 col-sm-12 col-12" *ngIf="houseData">
      <div [@cardAnimation] class="card card-animation p-2" *ngIf="indexCard === 1 && HouseInfo.rent === 1">
        <app-parameters></app-parameters>
      </div>

      <div [@cardAnimation] class="stub-card card p-3"
        *ngIf="indexCard === 1 && HouseInfo.rent === 0 || HouseInfo.rent === null">
        <a class="stub-card-link" [routerLink]="'/housing-parameters/host/about'">
          <img class="stub-card-logo" src="{{path_logo}}" alt="logo">
          <p class="t-lar accent bold">"Пошуковий профіль оселі вимкнено"</p>
          <p class="t-min bold">Натисніть сюди для його активації</p>
          <p class="t-lar gray mt-3">Тут будуть параметри вашої оселі і те як їх бачать орендарі в Discussio.
            Заповніть форму та чекайте коли на Вас підпишуться орендарі.</p>
        </a>
      </div>

      <div [@cardAnimation] class="card card-animation p-2" *ngIf="indexCard === 2">
        <app-house-share></app-house-share>
      </div>
    </div>

  </div>

  <app-footer class="hide-mobile"></app-footer>

</ng-template>
