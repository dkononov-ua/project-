<div class="container-fluid">

  <div class="switch-box p-2 hide-pc">
    <div class="btn-menu">
      <button class="btn" [ngClass]="{ 'active': indexPage == 0}" (click)="indexPage = 0" matTooltip="Фото"
        (click)="indexPage = 0">
        <i class="fa-regular fa-image"></i></button>
    </div>

    <div class="btn-menu hide-pc">
      <button class="btn" [ngClass]="{ 'active': indexPage == 1}" (click)="indexPage = 1"
        matTooltip="ПОБ">
        <i class="fa-regular fa-circle-user"></i></button>
    </div>

    <div class="btn-menu">
      <button class="btn" [ngClass]="{ 'active': indexPage == 2}" (click)="indexPage = 2"
        matTooltip="Контакти">
        <i class="fa-solid fa-share-nodes"></i></button>
    </div>

  </div>

  <div class="container-navbar hide-mobile">
    <nav class="navbar">
      <a [routerLinkActive]="'active'" [routerLink]="'/user/info'"><i class="fa-solid fa-chevron-left"></i></a>
      <a [routerLinkActive]="'active'" [routerLink]="'/information-user'">Профіль корустувача</a>
      <a [routerLinkActive]="'active'" [routerLink]="'/housing-parameters/host/address'">Профіль оселі</a>
    </nav>
  </div>

  <div class="container-card hide-mobile">

    <div class="card-box-photo p-2 col-lg-4 col-md-5 col-sm-6 col-12">
      <div class="img-fluid">
        <img [src]="serverPathPhotoUser + (userImg ? userImg : 'user_default.svg')">
      </div>

      <div class="card-1 mb-2">
        <div class="flex-column w-70">
          <label class="label-1">ЗАВАНТАЖИТИ ФОТО</label>
          <div class="description">Додайте або оновіть фото вашого аккаунту</div>
        </div>
        <div class="input-div w-30">
          <i class="icon-up fa-solid fa-cloud-arrow-up" for="upload"></i>
          <input class="input-up" name="file" type="file" id="upload" (change)="onFileSelected($event)">
        </div>
      </div>

      <div class="card-1 mb-2">
        <div class="flex-column w-70">
          <label class="label-1">ВИЙТИ З АККАУНТУ</label>
          <div class="description">Створіть новий або увійдіть в інший аккаунт</div>
        </div>
        <button class="input-div w-30" (click)="logout()">
          <i class="icon-up fa-solid fa-door-open"></i>
        </button>
      </div>

      <!-- <div class="card">

        <mat-label class="label">Змінити пошту</mat-label>
        <div class="flex-row" *ngIf="emailCheck === 0">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Ваша пошта</mat-label>
            <input name="userInfo.email" matInput [disabled]="disabledEmail" [(ngModel)]="userInfo.email">
          </mat-form-field>
          <button class="btn-change" matTooltip="ЗМІНИТИ ПОШТУ" (click)="sendCodeEmail()">
            <i class="icon fa-solid fa-pen"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="emailCheck === 1">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Код підтвердження для зміни</mat-label>
            <input name="emailCode" matInput [(ngModel)]="checkCode">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="confirmCodeEmail()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="emailCheck === 2">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Введіть нову пошту</mat-label>
            <input name="userInfo.email" matInput [(ngModel)]="userInfo.email">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="sendCodeNewEmail()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="emailCheck === 3">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Код підтвердження нової пошти</mat-label>
            <input name="emailCheck" matInput [(ngModel)]="checkCode">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="confirmCodeNewEmail()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <mat-label class="label">Змінити пароль</mat-label>
        <div class="flex-row" *ngIf="passwordCheck === 0">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Ваш пароль</mat-label>
            <input name="password" type="password" matInput [disabled]="disabledPassword"
              [(ngModel)]="userInfo.password">
          </mat-form-field>
          <button class="btn-change" matTooltip="ЗМІНИТИ ПАРОЛЬ" (click)="sendCodePassword()">
            <i class="icon fa-solid fa-pen"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="passwordCheck === 1">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Код підтвердження для зміни</mat-label>
            <input name="checkCode" matInput [(ngModel)]="checkCode">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="confirmCodePassword()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="passwordCheck === 2">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Введіть новий пароль</mat-label>
            <input name="password" matInput [(ngModel)]="userInfo.password">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="sendCodeNewPassword()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

      </div> -->
    </div>

    <div [@cardAnimation1] class="card-box p-2 col-lg-4 col-md-5 col-sm-6 col-12">

      <div class="card ">

        <mat-label class="label">Персональні дані</mat-label>
        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Ім'я</mat-label>
          <input name="userInfo.firstName" matInput [(ngModel)]="userInfo.firstName">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Прізвище</mat-label>
          <input name="userInfo.lastName" matInput [(ngModel)]="userInfo.lastName">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>По батькові</mat-label>
          <input name="userInfo.surName" matInput [(ngModel)]="userInfo.surName">
        </mat-form-field>

        <mat-form-field class="w-100">
          <mat-label>Дата народження</mat-label>
          <input matInput [matDatepicker]="picker" [disabled]="true" [(ngModel)]="userInfo.dob">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-label class="label">Управління аккаунтом</mat-label>

        <div class="content">
          <div class="content-group">
            <label class="checkBox">
              <input id="acces_subs" type="checkbox" [(ngModel)]="userParam.add_in_flat">
              <div class="transition"></div>
            </label>
            <span class="checkBox-span" (click)="toggleDescription('acces_subs')">Додавати в оселю</span>
            <button class="btn-info" (click)="toggleDescription('acces_subs')"><i class="fa-solid fa-info"></i></button>
          </div>
          <div class="description-container">
            <div *ngIf="isDescriptionVisible('acces_subs')" class="description">
              <p class="descr"><span class="bold">Додавати в оселю</span> - дозвіл додавати Вас в оселю напряму без
                заключення угоди.</p>
              <button class="close-button" (click)="toggleDescription('acces_subs')">Закрити</button>
            </div>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn-1" matTooltip="ЗБЕРЕГТИ" (click)="saveInfoUser()">ЗБЕРЕГТИ</button>
        </div>

      </div>

    </div>

    <div [@cardAnimation2] class="card-box p-2 col-lg-4 col-md-5 col-sm-6 col-12">

      <div class="card">

        <mat-label class="label">Контактні дані</mat-label>
        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Телефон</mat-label>
          <input type="tel" name="userCont.tell" matInput [(ngModel)]="userCont.tell" [maxlength]="10"
            [pattern]="phonePattern">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Ваша контактна пошта</mat-label>
          <input name="userCont.mail" matInput [(ngModel)]="userCont.mail">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Telegram<i class="fa-brands fa-telegram"></i></mat-label>
          <input name="userCont.telegram" matInput [(ngModel)]="userCont.telegram">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Facebook<i class="fa-brands fa-facebook"></i></mat-label>
          <input name="userCont.facebook" matInput [(ngModel)]="userCont.facebook">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Instagram<i class="fa-brands fa-instagram"></i></mat-label>
          <input name="userCont.instagram" matInput [(ngModel)]="userCont.instagram">
        </mat-form-field>

        <div class="btn-group">
          <button class="btn-1" matTooltip="ЗБЕРЕГТИ" (click)="saveInfoCont()">ЗБЕРЕГТИ</button>
        </div>

      </div>

    </div>

  </div>

  <div class="container-card mt-2 hide-pc">

    <div [@cardAnimation] class="p-2 col-12" *ngIf="indexPage === 0">
      <div class="img-fluid">
        <img [src]="serverPathPhotoUser + (userImg ? userImg : 'user_default.svg')">
      </div>

      <div class="card-1 mb-2">
        <div class="flex-column w-70">
          <label class="label-1">ЗАВАНТАЖИТИ ФОТО</label>
          <div class="description">Додайте або оновіть фото вашого аккаунту</div>
        </div>
        <div class="input-div w-30">
          <i class="icon-up fa-solid fa-cloud-arrow-up" for="upload"></i>
          <input class="input-up" name="file" type="file" id="upload" (change)="onFileSelected($event)">
        </div>
      </div>

      <div class="card-1 mb-2">
        <div class="flex-column w-70">
          <label class="label-1">ВИЙТИ З АККАУНТУ</label>
          <div class="description">Створіть новий або увійдіть в інший аккаунт</div>
        </div>
        <button class="input-div w-30" (click)="logout()">
          <i class="icon-up fa-solid fa-door-open"></i>
        </button>
      </div>

      <!-- <div class="card">

        <mat-label class="label">Змінити пошту</mat-label>
        <div class="flex-row" *ngIf="emailCheck === 0">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Ваша пошта</mat-label>
            <input name="userInfo.email" matInput [disabled]="disabledEmail" [(ngModel)]="userInfo.email">
          </mat-form-field>
          <button class="btn-change" matTooltip="ЗМІНИТИ ПОШТУ" (click)="sendCodeEmail()">
            <i class="icon fa-solid fa-pen"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="emailCheck === 1">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Код підтвердження для зміни</mat-label>
            <input name="emailCode" matInput [(ngModel)]="checkCode">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="confirmCodeEmail()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="emailCheck === 2">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Введіть нову пошту</mat-label>
            <input name="userInfo.email" matInput [(ngModel)]="userInfo.email">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="sendCodeNewEmail()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="emailCheck === 3">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Код підтвердження нової пошти</mat-label>
            <input name="emailCheck" matInput [(ngModel)]="checkCode">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="confirmCodeNewEmail()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <mat-label class="label">Змінити пароль</mat-label>
        <div class="flex-row" *ngIf="passwordCheck === 0">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Ваш пароль</mat-label>
            <input name="password" type="password" matInput [disabled]="disabledPassword"
              [(ngModel)]="userInfo.password">
          </mat-form-field>
          <button class="btn-change" matTooltip="ЗМІНИТИ ПАРОЛЬ" (click)="sendCodePassword()">
            <i class="icon fa-solid fa-pen"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="passwordCheck === 1">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Код підтвердження для зміни</mat-label>
            <input name="checkCode" matInput [(ngModel)]="checkCode">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="confirmCodePassword()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

        <div class="flex-row" *ngIf="passwordCheck === 2">
          <mat-form-field class="item-select m-1" appearance="outline">
            <mat-label>Введіть новий пароль</mat-label>
            <input name="password" matInput [(ngModel)]="userInfo.password">
          </mat-form-field>
          <button class="btn-change" matTooltip="ПІДТВЕРДИТИ" (click)="sendCodeNewPassword()">
            <i class="fa-regular fa-circle-check"></i>
          </button>
        </div>

      </div> -->
    </div>

    <div [@cardAnimation] class="card-animation p-2 col-12" *ngIf="indexPage === 1">

        <mat-label class="label">Персональні дані</mat-label>
        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Ім'я</mat-label>
          <input name="userInfo.firstName" matInput [(ngModel)]="userInfo.firstName">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Прізвище</mat-label>
          <input name="userInfo.lastName" matInput [(ngModel)]="userInfo.lastName">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>По батькові</mat-label>
          <input name="userInfo.surName" matInput [(ngModel)]="userInfo.surName">
        </mat-form-field>

        <mat-form-field class="w-100">
          <mat-label>Дата народження</mat-label>
          <input matInput [matDatepicker]="picker" [disabled]="true" [(ngModel)]="userInfo.dob">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-label class="label">Управління аккаунтом</mat-label>

        <div class="content">
          <div class="content-group">
            <label class="checkBox">
              <input id="acces_subs" type="checkbox" [(ngModel)]="userParam.add_in_flat">
              <div class="transition"></div>
            </label>
            <span class="checkBox-span" (click)="toggleDescription('acces_subs')">Додавати в оселю</span>
            <button class="btn-info" (click)="toggleDescription('acces_subs')"><i class="fa-solid fa-info"></i></button>
          </div>
          <div class="description-container ">
            <div *ngIf="isDescriptionVisible('acces_subs')" class="description p-2">
              <p class="descr"><span class="bold">Додавати в оселю</span> - дозвіл додавати Вас в оселю напряму без
                заключення угоди.</p>
              <button class="close-button" (click)="toggleDescription('acces_subs')">Закрити</button>
            </div>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn-1" matTooltip="ЗБЕРЕГТИ" (click)="saveInfoUser()">ЗБЕРЕГТИ</button>
        </div>


    </div>

    <div [@cardAnimation] class="card-animation p-2 col-12" *ngIf="indexPage === 2">

        <mat-label class="label">Контактні дані</mat-label>
        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Телефон</mat-label>
          <input type="tel" name="userCont.tell" matInput [(ngModel)]="userCont.tell" [maxlength]="10"
            [pattern]="phonePattern">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Ваша контактна пошта</mat-label>
          <input name="userCont.mail" matInput [(ngModel)]="userCont.mail">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Telegram<i class="fa-brands fa-telegram"></i></mat-label>
          <input name="userCont.telegram" matInput [(ngModel)]="userCont.telegram">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Facebook<i class="fa-brands fa-facebook"></i></mat-label>
          <input name="userCont.facebook" matInput [(ngModel)]="userCont.facebook">
        </mat-form-field>

        <mat-form-field class="item-select m-1" appearance="outline">
          <mat-label>Instagram<i class="fa-brands fa-instagram"></i></mat-label>
          <input name="userCont.instagram" matInput [(ngModel)]="userCont.instagram">
        </mat-form-field>

        <div class="btn-group">
          <button class="btn-1" matTooltip="ЗБЕРЕГТИ" (click)="saveInfoCont()">ЗБЕРЕГТИ</button>
        </div>

    </div>

  </div>
</div>

<div *ngIf="loading" class="loader-overlay">
  <app-loader></app-loader>
</div>
