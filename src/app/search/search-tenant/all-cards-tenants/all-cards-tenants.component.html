<div class="card-wrapper" *ngIf="filteredUsers">
  <div [@swichCard] #findCards class="find-cards card-animation" (scroll)="onScroll($event)">
    <div class="position-sticky">
      <div class="t-lar bold gray">Показано {{shownCard}}/{{optionsFound}}</div>
    </div>
    <button class="card-mini" *ngFor="let user of filteredUsers; let i = index" (click)="selectUser(user)"
      [class.selected]="selectedUser === user">

      <div class="card-mini-body p-2 al-fe">

        <div class="flex-box" *ngIf="user.price_of || user.price_to">
          <div mat-raised-button class="param-g flex-column mr-2" *ngIf="user.price_of">
            <div class="bg-g t-lar-xx bold white">
              <span>{{user.price_of}}</span>
            </div>
            <div class="t-min bg-w white">Бюджет від ₴</div>
          </div>
          <div mat-raised-button class="param-g flex-column" *ngIf="user.price_to">
            <div class="bg-g t-lar-xx bold white">
              <span>{{user.price_to}}</span>
            </div>
            <div class="t-min bg-w white">Бюджет до ₴</div>
          </div>
        </div>

        <div class="t-lar-x bold white">{{ user.lastName }} {{ user.firstName }}</div>

        <div class="flex-box t-min accent">
          <span class="mr-2" *ngIf="user.city">в {{user.city}}</span>
          <span class="mr-2" *ngIf="user.house">Будинок</span>
          <span class="mr-2" *ngIf="user.flat">Квартира</span>
          <span class="mr-2" *ngIf="user.room">Кімната</span>
        </div>

      </div>

      <ng-container *ngIf="user.img && isLoadingImg">
        <div class="card-mini-user">
          <img
            [src]="user.img && user.img ? serverPathPhotoUser + user.img : serverPathPhotoUser + 'housing_default.svg'"
            alt="img">
        </div>
      </ng-container>

      <ng-container *ngIf="user.img && !isLoadingImg">
        <div class="card-mini-img">
          <div class="container-loader-mini">
            <mat-spinner color="warn"></mat-spinner>
            <img
              [src]="user.img && user.img ? serverPathPhotoUser + user.img : serverPathPhotoUser + 'user_default.svg'"
              alt="img" (load)="isLoadingImg = true" hidden>
            <div class="t-min gray mt-2">Завантаження фото</div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="!user.img">
        <div class="card-mini-img">
          <img src="../../../../assets/user_default.svg" alt="img">
        </div>
      </ng-container>

    </button>
  </div>
</div>
